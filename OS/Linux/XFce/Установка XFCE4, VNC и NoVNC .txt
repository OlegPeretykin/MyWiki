2023-01-11

sudo apt install task-xfce-desktop

---------------------------------------------------
Установка XFCE4, VNC и NoVNC

Общие понятия
VNC — система удаленного доступа
XFCE4 — среда рабочего стола
NoVNC — ПО для подключения к VNC через браузер

Установка необходимых пакетов
Для начала установим все необходимые в дальнейшем пакеты:
sudo apt update && sudo apt install xfce4 xfce4-goodies tmux snap tightvncserver

В процессе установки, у вас спросят какой менеджер окон использовать, просто выберите первый вариант нажатием Enter. 

После установим NoVNC:
sudo snap install novnc

Конфигурация VNC сервера
Для конфигурирования VNC для XFCE4 достаточно создать всего один файл, что можно сделать командой:
mkdir ~/.vnc && echo '''#!/bin/bash
xrdb $HOME/.Xresources
startxfce4 &''' > ~/.vnc/xstartup

Запуск VNC сервера
Запуск VNC сервера возможен всего одной командой:
vncserver
При первом запуске у вас попросит придумать пароль для дальнейшего подключения к серверу, изменить его в дальнейшем можно будет командой
vncpasswd
А завершить запущенный VNC сервер возможно с помощью команды:
vncserver -kill :1

Запуск noVNC для доступа к VNC через браузер
Далее нам понадобится консольный менеджер окон tmux
Создадим новую сессию tmux:
tmux new-session

А затем, запустим сам NoVNC:
novnc --vnc localhost:5901 --listen 5900
После, у нас успешно запуститься NoVNC.Вы можете заменить порт 5900 на любой другой не задействованный порт.

Настройка брандмауэра
Для разрешения входящих соединений необходимо ввести (в случае если используется межсетевой экран ufw):
sudo ufw allow 5901
sudo ufw allow 5900 # Порт NoVNC

После настройки брандмауэра мы можем перейти к
Подключение к VNC
Для начала, необходимо установить клиент для подключения к VNC: RealVNC
После, нажмем на + для добавления ПК для подключения, в поле адреса введите адрес формата: IPАдрес:5901, а затем нажмите кнопку подключения. У вас попросит пароль для подключения, который задавался ранее

Подключение к VNC через браузер
Для подключения достаточно открыть обыкновенный браузер и перейти по адресу:
http://IPАдрес:5900/vnc
А затем, нажать кнопку Подключение и ввести пароль для подключения, заданный ранее.
Если вы установили другой порт для NoVNC, то замените 5900 на ваш порт.
