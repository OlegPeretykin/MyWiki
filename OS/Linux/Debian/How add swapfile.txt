Как добавить пространство подкачки в Debian 11
01.11.2021SRPPZ DEBIAN, LINUX
Как добавить пространство подкачки в Debian 11

 

В этом руководстве мы покажем вам, как добавить пространство подкачки в Debian 11. Для тех из вас, кто не знал, память подкачки — это место на жестком диске, которое будет использоваться операционной системой в качестве памяти. Проще говоря, это означает, что если в системе заканчивается физическая память (ОЗУ), она переносит в это пространство некоторые из менее используемых данных из ОЗУ.

aviso | рекламный сервис
В этой статье предполагается, что у вас есть хотя бы базовые знания Linux, вы знаете, как использовать оболочку, и, что наиболее важно, вы размещаете свой сайт на собственном VPS. Установка довольно проста и предполагает, что вы работаете с учетной записью root, в противном случае вам может потребоваться добавить ‘ sudo‘ к командам для получения привилегий root. Я покажу вам шаг за шагом, как добавить пространство подкачки в Debian 11 (Bullseye).

Добавить пространство подкачки в Debian 11 Bullseye
Шаг 1. Перед установкой любого программного обеспечения важно убедиться, что ваша система обновлена, выполнив следующие aptкоманды в терминале:
sudo apt update
sudo apt upgrade
Шаг 2. Добавьте пространство подкачки в Debian 11.
Сначала проверьте пространство подкачки, выполнив следующие команды:

sudo swapon -s
free -m
Если вывод пуст, это означает, что в системе нет места для подкачки. Если раздел уже существует, в результате вы должны получить хотя бы одну строчку:

NAME      TYPE      SIZE USED PRIO
/dev/sda2 partition   8G   0B   -1
Теперь мы создаем файл для использования в качестве подкачки в вашей системе Debian. Здесь мы создаем файл подкачки размером 2 ГБ в файле / swapfile. Как показано ниже:

sudo fallocate -l 2G /swapfile 
chmod 600 /swapfile

Затем мы должны сообщить системе, что этот файл будет для свопа. Это можно сделать с помощью команды mkswap:

sudo mkswap /swapfile
Затем активируйте память подкачки в вашей системе Debian:

sudo swapon /swapfile
Чтобы сделать изменение постоянным, откройте файл:/etc/fstab

sudo nano /etc/fstab
Добавьте следующую запись в конец файла:

/swapfile swap swap defaults 0 0
Чтобы убедиться, что ваше пространство подкачки активно, вы можете запустить начальную команду с флагом:–show

sudo swapon --show
Шаг 3. Настройте значение подкачки.
Swappiness — это свойство ядра Linux, которое определяет, как часто система будет использовать пространство подкачки. Swappiness может иметь значение от 0 до 100. Значение swappiness по умолчанию — 60, что вы можете проверить с помощью следующей команды:

cat /proc/sys/vm/swappiness
Вы можете установить значение подкачки с помощью команды « sysctl»

sudo sysctl vm.swappiness=40
Шаг 4. Удалите файл пространства подкачки.
Удаление разделов подкачки в Debian довольно просто, выполните следующие действия:

Деактивируйте пространство подкачки, запустив:
sudo swapoff -v /swapfile
Удалить из /etc/fstab
Откройте файл в текстовом редакторе и удалите запись файла подкачки ./etc/fstab/swapfile swap swap defaults 0 0

Наконец, удалите фактический файл подкачки, используя следующую команду ниже:
sudo rm /swapfile
