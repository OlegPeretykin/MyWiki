Мы работали над проектом на своем сервере в Gitlab. Спустя некоторое время сервера поменялись, был установлен новый Gitlab на новом сервере. Появилась задача переноса проекта или проектов с одного сервера на другой, с одного Gitlab на другой Gitlab. Для этого необходимо будет выполнить ряд команд и действий. Открываем командную строку на сервере, где установлен Gitlab со старыми проектами. Если действия производить не с данного сервера, то необходима дополнительная установка оболочки shell для управления гитом. Например для ОС Windows это Git Bash.

Первая команда будет копировать проект из старого Gitlab на сервер, откуда поступает подобный запрос.

Шаг1.

git clone --mirror <здесь полный путь до проекта> <здесь имя папки куда будет сохраняться проект на ПК или сервере*>
*можно не указывать. Тогда папка будет сохранена автоматически по имени проекта.

Пример.

git clone --mirror https://gitlab.bolshoyotvet.ru/project/project1.git newpapka*
*если не написать newpapka, то проект сохранится в папку с названием project1

После введения данной команды проект копируется и сохраняется на ПК или сервер, откуда вы печатаете команды.

Шаг2.

cd newpapkaили
cd project1

Заходим в папку, куда мы сохранили проект

Шаг 3.

git remote rm origin

Отвязываем папку от текущего репозитория. По умолчанию это репозиторий с названием origin. Чтобы посмотреть с каким репозиторием связана сейчас папка, необходимо набрать команду git remote show origin.

Шаг 4.

git remote add <любой набор букв и цифр. это названия нового локального репозитория> <здесь указываем путь до нового репозитория>

Пример

git remote add adv https://afg.gitlab.com/pro/project1.git

Таким образом мы создаем еще и новый репозиторий на новом сервере с новым Gitlab под названием project1.git

Шаг 5.

git push adv --all

Мы переносим все данные по скачанному проекту со своего локального сервера или ПК на новый сервер с новым Gitlab. adv в данном примере - это название нового локального репозитория, который мы указали в шаге 4.

Шаг 6.

git push --tags

Дополнительно переносим тэги к проекту.

Выполнив все шаги, мы перенесем проект из старого сервера со старым Gitlab на новый сервер с новым Gitlab.
